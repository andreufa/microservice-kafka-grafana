# Микросервис фильтрации запросов

## Цель проекта
Выделение эндпоинта фильтрации запросов из монолитной архитектуры в отдельный микросервис для:
- Снижения нагрузки на основной обработчик данных
- Улучшения масштабируемости системы
- Повышения наблюдаемости работы системы

## Архитектура решения

```mermaid
    A[Входящие запросы] --> B[Микросервис фильтрации]
    B --> C{Фильтрация}
    C -->|Не прошли| D[(PostgreSQL\nВсе запросы)]
    C -->|Прошли| E[Kafka]
    E --> F[Основной обработчик]
    F --> G[(PostgreSQL\nРезультаты)]
    B & F --> H[Prometheus]
    H --> I[Grafana]
```

## Компоненты системы
**Микросервис фильтрации** (filter-service).Принимает HTTP-запросы. Валидирует и фильтрует данные по бизнес-правилам.Логирует все входящие запросы в PostgreSQL.Отправляет валидные данные в Kafka.

**Основной обработчик** (processor-service). Потребляет сообщения из Kafka. Выполняет ресурсоемкую обработку данных.Сохраняет результаты в отдельную БД PostgreSQL. 

**Система мониторинга:**
Prometheus для сбора метрик.Grafana для визуализации.Кастомные метрики через middleware.

**Основные метрики:**

http_requests_total - общее количество запросов
http_request_duration_seconds - время обработки запросов
filtered_requests_total - количество успешно отфильтрованных запросов
kafka_messages_sent - количество сообщений отправленных в Kafka

## Результаты внедрения
Снижение нагрузки на основной обработчик на 40%

Уменьшение времени отклика системы на 25%

Улучшение наблюдаемости через Grafana-дашборды

Повышение отказоустойчивости системы